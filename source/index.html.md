---
title: Pepper ChatBot API Reference

language_tabs:
  - msbot


toc_footers:
  - <a href='#'>Sign Up for a Developer Key</a>

includes:
  - faq

search: true
---

# Pepper ChatBot API


```msbot
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
Microsoft's open source Bot Builder SDKs allow you to build simple
to sophisticated dialogs; Cognitive Services enable your bot to see,
hear, interpret and interact in more human ways. Ms-Bot is the first,
3rd-party ChatBot integration that SoftBank Robotics supports.

To see a working example, download the emulator here:
    https://docs.microsoft.com/en-us/bot-framework/debug-bots-emulator
and use the following sample PuppyBot information to set up your emulator:

MS Bot Endpoint:
   https://pepper-msbot.azurewebsites.net/api/messages?code=e3fa60oaOlabQUptT63DYSWPxrdG0pS9zFrADLT1xX9iGx6FxAG7pw==

PuppyBot App Id:
   808ad83e-3876-40fd-b0e8-a616e014fc6f

PuppyBot Password:
   9nHp8QNcwQJcNDHHjBCnoj7

PuppyBot LUIS Endpoint:
   https://westus.api.cognitive.microsoft.com/luis/v2.0/apps/4e4b1c46-5d6d-4035-9905-eef921df734f?subscription-key=37e463e0ae22427abc606d076dafbdd3&timezoneOffset=-480&verbose=true&spellCheck=true&q=
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
```

Welcome to the Pepper ChatBot API! You can use this API to access a 3rd party chatbot's endpoints in order to integrate an existing chatbot with Pepper. 

You can view general integration instructions in this central, light blue section. In the dark area to the right, you can see chatbot-specific code examples corresponding visually in line with each general section. Switch between different chatbot-specific code examples with the tabs in the top right.

<aside class="notice">We currently only support integrations with our default chatbot service (satisfi) and the Microsoft Bot Framework (msbot), but this list is quickly growing, so check back soon or else get in touch with us directly if your chatbot platform does not appear on this list!</aside>


# Authentication


```msbot
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
Provide your 'botToken' to the SoftBank Robotics Sales Engineer assisting 
you with setup. You can find your 'botToken' by following these steps:

Step 1: Open your bot in Azure portal.
Step 2: Select the CHANNELS tab.
Step 3: Add DirectLine to your bot.
Step 4: Click on Edit.
Step 5: Copy one of the Secret Keys that was generated.
Step 6: Give the copied value (botToken) to the SBR Sales Engineer.
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
```
ChatBots use RESTful APIs with APP IDs, PASSWORDs, and/or ACCESS TOKENS to authenticate in order to retrieve chatbot data. Requests are made to the ChatBot from a single endpoint:

<code>https://{YOUR-CHATBOT'S-ENDPOINT}</code>

<aside class="notice">Authorization: Varies between chatbots, but typically requires your App ID and Password when configuring. We currently must work together with your   developers to set this up, but will soon provide a web interface for self service.</aside>


# Pepper Data Model

> Pepper Data Model - Pepper API returns the following data model, with its variations, in reply to an utterance or wav file sent through either POST or Websocket:

```json
{ 
    "utteranceId": GUID,
    "sessionId": GUID,
    "botConversationId": GUID,
    "speak": STRING,
    "show": {
       "text": STRING,
        "content": [{
            "text": STRING,
            "speak": STRING,
            "contentURL": STRING URL,
            "value": STRING
        }]
    }
}
```

To the right, you can see the generic data model returned by the Pepper API. Below you can find definitions for the various datums returned in the response. In the sections that follow, you can see precisely how Pepper will display various types of mixed media responses.


### Definitions:

<code> utteranceId</code>

A GUID generated by Pepper in order to track the sent and returned values for an utterance.

<code> sessionId </code>

A GUID generated by Pepper in order to track the chat session, has a mapping to a botCoversationId if needed.

<code> botConversationId </code>

A GUID generated by the bot in the cloud. Satisfi let’s us set this, so it’s a one to one mapping in some cases.

<code> speak </code>

A string Pepper is meant to speak upon RETURN of the data model from the WebSocket

<code> show </code>

An object detailing out what Pepper is supposed to show, along with actionable entities

<code> show.text </code>

A string that Pepper is supposed to show as a title for the content to be displayed

<code> show.content </code>

A object that contains an array of objects meant to cover all scenarios related to chatbot interfaces.

<code> show.content.text </code>

A nullable string to be shown for the content object

<code> show.content.speak </code>

A nullable string for Pepper to speak upon selection of the content object

<code> show.content.contentURL </code>

The nullable url for the content to be displayed of the content object

<code> show.content.value </code>

A nullable string that contains the actionable value to be returned to the chat bot upon content selection.



## Text Only Response

```json
{
    msgType: "chatbotresponse",
    data: "Answer",
    type: "message",
    conversationID: "testgguid",
    uniqueID: "b958c65a-3c9f-4f38-919d-0a4c70ae3e0d",
    utteranceID: "testutteranceID",
    sessionID: "testgguid",
    response: "Answer",
    speak: "Answer",
    show: {
        text: "Answer"
    }
}
```

<img src = "images/Pepper_Data_Model-Text_Only_Response.png"/>


## Video Response

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "Look at this cool video",
  show: {
    content: [{
        contentURL: "https.content.mp4"
      }
    ]
  }
}
```

<img src = "images/Pepper_Data_Model-Video_Response.png"/>

## Picture and Text Response (Non-actionable)

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
  show: {
    text: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
    content: [{
        text: "Caption",
        contentURL: "https.content.png"
      },
      {
        text: "Caption",
        contentURL: "https.content.jpeg"
      },
      {
        text: "Caption",
        contentURL: "https.content.gif"
      }
    ]
  }
}
```

<img src = "images/Pepper_Data_Model-Picture_And_Text_Response.png"/>

## Picture Only Response (Non-actionable)

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "Look at this cool pic",
  show: {
    text: "Look at this cool pic",
    content: [{
        contentURL: "https.content.png"
      }
    ]
  }
}
```

<img src = "images/Pepper_Data_Model-Picture_Only_Response.png"/>

## Picture and Text Response (Actionable)

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
  show: {
    text: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
    content: [{
        text: "Caption",
        contentURL: "https.content.png",
        value: "action1"
      },
      {
        text: "Caption",
        contentURL: "https.content.jpeg",
        value: "action2"
      },
      {
        text: "Caption",
        contentURL: "https.content.gif",
        value: "action3"
      }
    ]
  }
}
```

<img src = "images/Pepper_Data_Model-Picture_And_Text_Response.png"/>

## Picture Only Response (Actionable)

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
  show: {
    text: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
    content: [{
        contentURL: "https.content.png",
        value: "action1"
      },
      {
        contentURL: "https.content.jpeg",
        value: "action2"
      },
      {
        contentURL: "https.content.gif",
        value: "action3"
      }
    ]
  }
}
```
< No Image Provided in Luxoft Documentation >


## Text Bubbles Response (Actionable)

```json
{
  utteranceId: "1234abcde",
  sessionId: "abcde1234",
        botConversationId: "a1b2c3d4e5",
  speak: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
  show: {
    text: "The weather in San Francisco today is a high of 66 degrees and a low of 48.",
    content: [{
        text: "YES",
        value: "yes"
      },
      {
        text: "NO",
        value: "no"
      }
    ]
  }
}
```

<img src = "images/Pepper_Data_Model-Text_Bubbles_Response.png"/>

# Accepted ChatBot Responses

Not all of a ChatBot's responses will necessarily be compatible with our Pepper ChatBot API.
We will generally accept the subset of all ChatBot responses that coincide with the Pepper
ChatBot API data model. Scroll the options to the right within the appropriate tab for your
given ChatBot to see what the accepted responses are for your ChatBot.




```msbot
"""""""""""""""""""""""""""
Supported MS-Bot Responses:
"""""""""""""""""""""""""""
The following show the data models of various MS-Bot responses, 
followed by their mappings to the Pepper ChatBot data model:

"""""""""""""""""""""""""""""""""""
Hero Card with Images and Choices
"""""""""""""""""""""""""""""""""""
MS-Bot response data model:
{
  "type": "message",
  "attachmentLayout": "carousel",
  "attachments": [{
      "contentType": "application/vnd.microsoft.card.thumbnail",
      "content": {
        "title": "Boxer",
        "subtitle": "A breed of utility dog.",
        "text": "The American boxer is a stocky, well built, strong-looking dog, with a large head and a muscular build. Its coat is short and generally smooth. The breed is a light to moderate shedder.",
        "images": [{
          "url": "https://static.pexels.com/photos/158682/snow-dog-de-bordeaux-158682.jpeg"
        }],
        "buttons": [{
          "type": "imBack",
          "value": "boxer",
          "title": "Boxer"
        }]
      }
    },
    {
      "contentType": "application/vnd.microsoft.card.thumbnail",
      "content": {
        "title": "Akita",
        "subtitle": "Continental Toy Spaniel",
        "text": "The Akita is a very intelligent and self-assured dog that has a very easy time learning new tricks. This dog can be sociable with children and strangers but is generally reserved around new people. ",
        "images": [{
          "url": "https://upload.wikimedia.org/wikipedia/commons/5/56/Papillon_Ears.jpg"
        }],
        "buttons": [{
          "type": "imBack",
          "value": "akita",
          "title": "Akita"
        }]
      }
    }
  ],
  "locale": "en-US",
  "localTimestamp": "2017-10-02T10:45:24-07:00",
  "from": {
    "id": "n5dm5eb6ldekh6a3",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user"
  },
  "inputHint": "acceptingInput",
  "replyToId": "dn58c2bfjd1089dkac",
  "id": "nbdk7b69eb0j9j69",
  "channelId": "emulator",
  "timestamp": "2017-10-02T17:45:24.902Z",
  "conversation": {
    "id": "6ja3le587mmjbc4c"
  }
}

Mapping (MS-Bot -> Pepper Data Model):
attachments ~> show.content
attachments.title -> show.content.text
attachments.subtitle -> **ABANDONED**
attachments.text -> show.content.speak
attachments.images.url -> show.content.contentURL
attachments.buttons.value -> show.content.value

ADDED
speak: "Tap or Say one of the following"
show.content.text: "Tap or Say one of the following"

WHERE
~> = loosely mapped
-> = strictly mapped

Pepper ChatBot API Translation:
{
  "msgType": "chatbotresponse",
  "data": "Tap or Say one of the following",
  "type": "message",
  "conversationID": "testgguid",
  "uniqueID": "28e36552-b0d8-42e2-b495-65f61329ad69",
  "utteranceID": "testutteranceID",
  "sessionID": "testgguid",
  "response": "Tap or Say one of the following",
  "speak": "Tap or Say one of the following",
  "show": {
    "content": [{
      "text": "Boxer",
      "speak": "The American boxer is a stocky, well built, strong-looking dog, with a large head and a muscular build. Its coat is short and generally smooth. The breed is a light to moderate shedder.",
      "contentURL": "https://static.pexels.com/photos/158682/snow-dog-de-bordeaux-158682.jpeg",
      "value": "boxer"
    }, {
      "text": "Akita",
      "speak": "The Akita is a very intelligent and self-assured dog that has a very easy time learning new tricks. This dog can be sociable with children and strangers but is generally reserved around new people. ",
      "contentURL": "https://upload.wikimedia.org/wikipedia/commons/5/56/Papillon_Ears.jpg",
      "value": "akita"
    }],
    "text": "Tap or Say one of the following"
  }
}


"""""""""""""""""""""""
Hero Card with Choices
"""""""""""""""""""""""
MS-Bot response data model:
{
  "type": "message",
  "attachments": [{
    "contentType": "application/vnd.microsoft.card.hero",
    "content": {
      "title": "Do you want to know about Puppies?",
      "buttons": [{
          "type": "imBack",
          "value": "Yes please",
          "title": "Yes please"
        },
        {
          "type": "imBack",
          "value": "No thanks",
          "title": "No thanks"
        }
      ]
    }
  }],
  "locale": "en-US",
  "localTimestamp": "2017-10-02T10:45:19-07:00",
  "from": {
    "id": "n5dm5eb6ldekh6a3",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user"
  },
  "inputHint": "acceptingInput",
  "replyToId": "i0gn412d30ag423i",
  "id": "j2j8245c6b9m12n3i",
  "channelId": "emulator",
  "timestamp": "2017-10-02T17:45:19.923Z",
  "conversation": {
    "id": "6ja3le587mmjbc4c"
  }
}

Mapping (MS-Bot -> Pepper Data Model):
attachments.content.buttons ~> show.content
attachments.content.buttons.title -> show.content.text
attachments.content.buttons.value -> show.content.value
attachments.content.title -> show.text
attachments.content.title -> speak

WHERE
~> = loosely mapped
-> = strictly mapped

Pepper ChatBot API Translation:
{
  "msgType": "chatbotresponse",
  "data": "Do you want to know about Puppies?",
  "type": "message",
  "conversationID": "testgguid",
  "uniqueID": "28e36552-b0d8-42e2-b495-65f61329ad69",
  "utteranceID": "testutteranceID",
  "sessionID": "testgguid",
  "response": "Do you want to know about Puppies?",
  "speak": "Do you want to know about Puppies?",
  "show": {
    "content": [{
      "text": "Yes please",
      "value": "Yes please"
    }, {
      "text": "No thanks",
      "value": "No thanks"
    }],
    "text": "Do you want to know about Puppies?"
  }
}


"""""""""""""""""""""""""
Image Attachments
"""""""""""""""""""""""""

MS-Bot response data model:
{
  "type": "message",
  "attachments": [{
      "contentUrl": "http://www.greathillpartners.com/wp-content/uploads/Golden-Puppy.jpg",
      "contentType": "image/jpg",
      "name": "Puppy pic 1"
    },
    {
      "contentUrl": "https://i.ytimg.com/vi/VRiWE1l8KqI/maxresdefault.jpg",
      "contentType": "image/jpg",
      "name": "Puppy pic 2"
    },
    {
      "contentUrl": "http://24.media.tumblr.com/53e3171e750c6c1028f8200ad73c8a53/tumblr_mkozt0qp3B1qiwf8po1_500.jpg",
      "contentType": "image/jpg",
      "name": "Puppy pic 1"
    }
  ],
  "text": "Here are some puppies",
  "locale": "en-US",
  "localTimestamp": "2017-10-02T11:01:51-07:00",
  "from": {
    "id": "default-bot",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user"
  },
  "inputHint": "ignoringInput",
  "replyToId": "3j6714mfbl49hf1bac",
  "id": "688k3bd50e8ifk364c",
  "channelId": "emulator",
  "timestamp": "2017-10-02T18:01:51.235Z",
  "conversation": {
    "id": "efj6c25bj3e43b0c9"
  }
}

Mapping (MS-Bot -> Pepper Data Model):
attachments ~> show.content
attachments.contentUrl-> show.content. contentURL
attachments.contentType-> show.content.contentType
text -> speak
text -> show.text

WHERE
~> = loosely mapped
-> = strictly mapped

Pepper ChatBot API translation:
{
  "msgType": "chatbotresponse",
  "data": "Puppy pic 1",
  "type": "message",
  "conversationID": "testgguid",
  "uniqueID": "28e36552-b0d8-42e2-b495-65f61329ad69",
  "utteranceID": "testutteranceID",
  "sessionID": "testgguid",
  "response": "Puppy pic 1",
  "speak": "Here are some puppies",
  "show": {
    "content": [{
      "contentURL": "http://24.media.tumblr.com/53e3171e750c6c1028f8200ad73c8a53/tumblr_mkozt0qp3B1qiwf8po1_500.jpg",
      "contentType": "image/jpg"
    }, {
      "contentURL": "http://img-aws.ehowcdn.com/600x600p/photos.demandstudios.com/getty/article/154/20/87788187.jpg",
      "contentType": "image/jpg"
    }, {
      "contentURL": "http://images2.fanpop.com/image/photos/13300000/Beautiful-Rottweiler-rottweiler-13378960-500-375.jpg",
      "contentType": "image/jpg"
    }],
    "text": "Here are some puppies"
  }
}

"""""""""""
Text Only
"""""""""""

MS-Bot data model:
{
  "type": "message",
  "text": "Duh, German Shepard Puppies tell the best jokes!",
  "locale": "en-US",
  "localTimestamp": "2017-10-02T11:11:52-07:00",
  "from": {
    "id": "default-bot",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user"
  },
  "inputHint": "acceptingInput",
  "replyToId": "9hecj33gj8mckk1m3",
  "id": "48mj8inig8dmc9i39",
  "channelId": "emulator",
  "timestamp": "2017-10-02T18:11:52.982Z",
  "conversation": {
    "id": "mb6c0bcdl2eclij9i"
  }
}

Mapping (MS-Bot -> Pepper Data Model):
text -> speak
text -> show.text

WHERE
-> = strictly mapped

Pepper ChatBot API translation:
{
  "msgType": "chatbotresponse",
  "data": "Duh, German Shepard Puppies tell the best jokes!",
  "type": "message",
  "conversationID": "testgguid",
  "uniqueID": "28e36552-b0d8-42e2-b495-65f61329ad69",
  "utteranceID": "testutteranceID",
  "sessionID": "testgguid",
  "response": "Duh, German Shepard Puppies tell the best jokes!",
  "speak": "Duh, German Shepard Puppies tell the best jokes!",
  "show": {
    "text": "Duh, German Shepard Puppies tell the best jokes!"
  }
}

""""""""""""""""""
Video Attachments
""""""""""""""""""

MS-Bot data model:
{
  "type": "message",
  "attachments": [{
    "contentUrl": "https://pepperstoragedev.blob.core.windows.net/pepperstories/b68b2247-f74a-4f6b-b3ad-3e7e66c1e600.mp4?decache=QLT1MXCSF1A9",
    "contentType": "video/mp4",
    "name": "Puppy video"
  }],
  "text": "Here is a puppy video",
  "locale": "en-US",
  "localTimestamp": "2017-10-02T11:09:03-07:00",
  "from": {
    "id": "default-bot",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user"
  },
  "inputHint": "acceptingInput",
  "replyToId": "f0igi03ln2f4fem94c",
  "id": "ek9im8g5df0e305bf",
  "channelId": "emulator",
  "timestamp": "2017-10-02T18:09:03.318Z",
  "conversation": {
    "id": "mb6c0bcdl2eclij9i"
  }
}

Mapping (MS-Bot -> Pepper Data Model):
attachments ~> show.content
attachments.contentUrl-> show.content. contentURL
attachments.contentType-> show.content.contentType
text -> speak
text -> show.text

WHERE
~> = loosely mapped
-> = strictly mapped


Pepper ChatBot API translation:
{
  "msgType": "chatbotresponse",
  "data": "Here is a puppy video",
  "type": "message",
  "conversationID": "testgguid",
  "uniqueID": "28e36552-b0d8-42e2-b495-65f61329ad69",
  "utteranceID": "testutteranceID",
  "sessionID": "testgguid",
  "response": "Here is a puppy video",
  "speak": "Here is a puppy video",
  "show": {
    "content": [{
      "contentURL": "https://pepperstoragedev.blob.core.windows.net/pepperstories/b68b2247-f74a-4f6b-b3ad-3e7e66c1e600.mp4?decache=QLT1MXCSF1A9",
      "contentType": "video/mp4"
    }],
    "text": "Here is a puppy video"
  }
}

"""""""""
Greeting
"""""""""

MS-Bot response data model:
{
  "text": "What's up with you homie?",
  "inputHint": "expectingInput",
  "type": "message",
  "localTimestamp": "2017-09-22T03:27:11.411Z",
  "from": {
    "id": "7n77ehm8i7g704je6",
    "name": "Bot"
  },
  "recipient": {
    "id": "default-user",
    "name": "User"
  },
  "replyToId": "df2d0764lj5fhkn5ac"
}

Mapping (MS-Bot -> Pepper Data Model):
{Not mapped yet; future feature...}

```